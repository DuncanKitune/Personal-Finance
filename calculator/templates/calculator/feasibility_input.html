<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feasibility Study</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            padding: 20px;
        }

        form {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            max-width: 900px;
            margin: 0 auto;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h2 {
            text-align: left;
            color: #4CAF50;
            margin-bottom: 20px;
        }

        p {
            font-size: large;
            font-style: normal;
            color: gray;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            font-weight: bold;
            color: #333;
        }

        input[type="text"],
        input[type="number"] {
            width: calc(100% - 150px); /* Leave space for the label */
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        .form-row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .form-row label {
            width: 150px;
        }

        button {
            display: block;
            width: 100%;
            background-color: #28a745;
            color: white;
            padding: 12px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
        }

        button:hover {
            background-color: #218838;
        }

        .add-item-btn {
            background-color: #45a049;
            color: white;
            margin-top: 10px;
        }

        .investment-option-item,
        .operating-cost-item {
            background-color: #f9f9f9;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        h3,
        h4 {
            color: #4CAF50;
            margin-bottom: 15px;
        }

        .radio-group {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
        }

        .radio-group input {
            margin-right: 5px;
        }
    </style>
</head>

<body>

    <h2>Feasibility Study</h2>
    <p><strong>What is a feasibility study?</strong>"A feasibility study is your compass for navigating the uncharted waters of new projects. It's a deep dive into the viability of an idea, assessing its financial, operational, and technical feasibility. By examining costs, potential returns, and risks, you'll gain a clear understanding of whether your vision is a dream or a blueprint for success. It's like building a bridge before crossing it - ensuring that your investment leads to a rewarding destination."</p>
    <a href="{% url 'main_menu' %}" class="Home">Home</a>
    <form method="post">
        {% csrf_token %}

        <h3>Investment Options</h3>
        <div id="investment-options">
            <!-- {% for form in investment_formset %}
            <div class="investment-option-item"> -->
                <!-- {{ form.as_p }} -->

                <div class="form-row">
                    <label for="id_investment_name">Investment Name:</label>
                    <input type="text" id="id_investment_name" name="investment_name" placeholder="Enter the name of the investment">
                </div>
                <div class="form-row">
                    <label for="id_purchase_cost">Purchase Cost:</label>
                    <input type="number" id="id_purchase_cost" name="purchase_cost" placeholder="Cost of purchasing the asset">
                </div>
                <div class="form-row">
                    <label for="id_direct_income">Direct Income:</label>
                    <input type="number" id="id_direct_income" name="direct_income" placeholder="Income directly generated by the asset">
                </div>
                <div class="form-row">
                    <label for="id_indirect_income">Indirect Income:</label>
                    <input type="number" id="id_indirect_income" name="indirect_income" placeholder="Savings or additional income generated">
                </div>

                <h4>Operating Costs</h4>
                <div id="operating-costs-{{ forloop.counter }}">
                    <div class="form-row">
                        <label for="id_wear_tear">Wear and Tear:</label>
                        <input type="number" id="id_wear_tear" name="wear_tear" placeholder="Estimated cost for wear and tear">
                    </div>
                    <div class="form-row">
                        <label for="id_spare_parts">Spare Parts:</label>
                        <input type="number" id="id_spare_parts" name="spare_parts" placeholder="Cost of spare parts">
                    </div>
                    <div class="form-row">
                        <label for="id_fuel_electricity">Fuel/Electricity:</label>
                        <input type="number" id="id_fuel_electricity" name="fuel_electricity" placeholder="Fuel or electricity costs">
                    </div>
                    <div class="form-row">
                        <label for="id_manpower_costs">Manpower Costs:</label>
                        <input type="number" id="id_manpower_costs" name="manpower_costs" placeholder="Labor or manpower costs">
                    </div>
                    <div class="form-row">
                        <label for="id_depreciation">Depreciation:</label>
                        <input type="number" id="id_depreciation" name="depreciation" placeholder="Asset depreciation costs">
                    </div>
                </div>

                <button type="button" class="add-item-btn" data-id="{{ forloop.counter }}">Add Additional Operating Cost</button>
            </div>
            {% endfor %}
        </div>

        <button type="button" id="add-investment" class="add-item-btn">Add Investment Option</button>

        <h4>Choose Formula</h4>
        <div class="form-group">
            <div class="radio-group">
                <input type="radio" name="formula" id="formula_npv" value="npv" checked>
                <label for="formula_npv">Net Present Value (NPV)</label>
            </div>
            <div class="radio-group">
                <input type="radio" name="formula" id="formula_eac" value="eac">
                <label for="formula_eac">Equivalent Annual Cost (EAC)</label>
            </div>
            <div class="radio-group">
                <input type="radio" name="formula" id="formula_lease" value="lease">
                <label for="formula_lease">Leasing</label>
            </div>
        </div>

        <button type="submit">Calculate Feasibility</button>
    </form>

    <script>
        const addInvestmentBtn = document.getElementById('add-investment');
        const investmentOptionsContainer = document.getElementById('investment-options');

        let investmentCount = {{ investment_formset.total_form_count }};

        const investmentTotalFormsInput = document.createElement('input');
        investmentTotalFormsInput.type = 'hidden';
        investmentTotalFormsInput.name = 'investments-TOTAL_FORMS';
        investmentTotalFormsInput.value = investmentCount;
        document.forms[0].appendChild(investmentTotalFormsInput);

        addInvestmentBtn.addEventListener('click', () => {
            investmentCount++;
            const newInvestmentFormHtml = `
                <div class="investment-option-item">
                    <div class="form-row">
                        <label for="id_investments-${investmentCount}-investment_name">Investment Name:</label>
                        <input type="text" name="investments-${investmentCount}-investment_name" id="id_investments-${investmentCount}-investment_name" placeholder="Enter the name of the investment" required>
                    </div>
                    <div class="form-row">
                        <label for="id_investments-${investmentCount}-purchase_cost">Purchase Cost:</label>
                        <input type="number" name="investments-${investmentCount}-purchase_cost" id="id_investments-${investmentCount}-purchase_cost" placeholder="Cost of purchasing the asset" required>
                    </div>
                    <div class="form-row">
                        <label for="id_investments-${investmentCount}-direct_income">Direct Income:</label>
                        <input type="number" name="investments-${investmentCount}-direct_income" id="id_investments-${investmentCount}-direct_income" placeholder="Income directly generated by the asset" required>
                    </div>
                    <div class="form-row">
                        <label for="id_investments-${investmentCount}-indirect_income">Indirect Income:</label>
                        <input type="number" name="investments-${investmentCount}-indirect_income" id="id_investments-${investmentCount}-indirect_income" placeholder="Savings or additional income generated" required>
                    </div>

                    <h4>Operating Costs</h4>
                    <div id="operating-costs-${investmentCount}">
                        <div class="form-row">
                            <label for="id_operating_costs-${investmentCount}-wear_tear">Wear and Tear:</label>
                            <input type="number" name="operating_costs-${investmentCount}-wear_tear" id="id_operating_costs-${investmentCount}-wear_tear" placeholder="Estimated cost for wear and tear" required>
                        </div>
                        <div class="form-row">
                            <label for="id_operating_costs-${investmentCount}-spare_parts">Spare Parts:</label>
                            <input type="number" name="operating_costs-${investmentCount}-spare_parts" id="id_operating_costs-${investmentCount}-spare_parts" placeholder="Cost of spare parts" required>
                        </div>
                        <div class="form-row">
                            <label for="id_operating_costs-${investmentCount}-fuel_electricity">Fuel/Electricity:</label>
                            <input type="number" name="operating_costs-${investmentCount}-fuel_electricity" id="id_operating_costs-${investmentCount}-fuel_electricity" placeholder="Fuel or electricity costs" required>
                        </div>
                        <div class="form-row">
                            <label for="id_operating_costs-${investmentCount}-manpower_costs">Manpower Costs:</label>
                            <input type="number" name="operating_costs-${investmentCount}-manpower_costs" id="id_operating_costs-${investmentCount}-manpower_costs" placeholder="Labor or manpower costs" required>
                        </div>
                        <div class="form-row">
                            <label for="id_operating_costs-${investmentCount}-depreciation">Depreciation:</label>
                            <input type="number" name="operating_costs-${investmentCount}-depreciation" id="id_operating_costs-${investmentCount}-depreciation" placeholder="Asset depreciation costs" required>
                        </div>
                    </div>
                    <button type="button" class="add-item-btn" data-id="${investmentCount}">Add Additional Operating Cost</button>
                </div>
            `;
            investmentOptionsContainer.insertAdjacentHTML('beforeend', newInvestmentFormHtml);
        });
    </script>
</body>

</html>
